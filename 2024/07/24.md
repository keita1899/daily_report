# 7/24

## 取り組んだこと

- Youtube Farstep
  - Rails 星レビュー機能作成 1
  - Rails 星レビュー機能作成 2
  - Rails 星レビュー機能作成 3
- Github Actions 公式ドキュメント
- ポートフォリオ 英語日記
  - プッシュ時の CI のエラーを解決

## 学んだこと

### Github Actions

- Github Actions では yml ファイルを`.github/workflows/`に設置する
- Github Actions の基本の書き方
  - `name:` ワークフローの名前を指定
  - `on:` ワークフローが実行されるタイミング（イベント）を指定
  - `jobs:` ワークフローの中に含まれる 1 つ 1 つの一連の処理を指定、例えばテストとか静的解析とかのひとかたまりの処理
  - `runs-on:` ジョブのを実行する仮想環境（ランナー）を指定
  - `steps:` 具体的な処理を書く
  - `env` 環境変数を定義
  - `secrets` 秘匿情報を格納する環境変数を定義
  - `uses:` アクションを実行する
  - `run:` 任意のコマンドを実行する
  - `services:` Docker のサービスコンテナを使う
- jobs は順次または並列で実行される
- 各ジョブは専用の仮想マシンランナー内、またはコンテナ内で実行される
- ワークフローはイベント、手動、定義されたスケジュールのいずれかで実行できる
- on でよく指定するイベント
  - push リモートリポジトリへ push したとき
  - pull_request プルリクエストを作成したとき
  - deployment デプロイしたとき
  - release リリースしたとき
  - issues issue 関連の処理発生時
  - schedules cron による定期実行
- steps の中に run コマンドが 1 つ以上構成されている
- あるステップから別のステップでデータを共有できる
- ジョブと他のジョブで依存関係を構成できる
- アクションはワークフロー内の繰り返されているコードの量を減らすことができるもの（主に Git リポジトリのプル、ビルドの設定、クラウドプロバイダーの認証の設定など）
- アクションは Github 公式のものか、コミュニティで作られたものを使うか、自作のものか、Docker Hub のものを使うことができる
- アクションでは入力を受け入れて、出力を生成することもできる
- ランナーはワークフローがトリガーされると実行されるサーバーで、1 度に 1 つのジョブを実行できる
- リポジトリのチェックアウトとは、GitHub リポジトリのソースコードをアクションの実行環境（ランナー）にコピーするプロセス

### Rails 星レビュー機能作成

- 誰が何にレビューしたかを中間テーブルで管理する
- ユーザーは星をクリックするだけでレビューの点数を入力できないので、`hidden_field`を使う

## わからなかったこと

- Rails7 で node.js が必要な時とそうでないときの違い
- CI でのプリコンパイル
- CI での Node.js、yarn の設定

## 次やること

- udemy クリーンコード
  - 6
  - 7
  - 8
  - 9
- ポートフォリオ 英語日記
  - ログイン
  - ログアウト
  - プロフィール
  - パスワードリセット

## 感想

プッシュ時のエラーは`bundle exec rails javascript:install:esbuild`を実行してなかったから、`yarn build`が実行できなかったからだった。
エラー解決のために闇雲にプッシュしまくったけど、こういうローカルではうまくいくのに CI でエラーが起きる時はどう解決するのが一般的なんやろ。

Github Actions とりあえず基本的な書き方を学べた。あとはもう使ってわからない部分あったら調べる程度でいいや。
