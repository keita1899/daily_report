# 7/22 (月)

## 取り組んだこと

- ポートフォリオ 英語日記
  - ユーザー新規登録機能

## 学んだこと

- `has_secure_password`を使うと空文字は許可されてしまう
- `bcrypt`はデフォルトでパスワードの最大文字数が 72 文字に設定されている
- `allow_nil: true`で属性が nil のときにバリデーションをスキップできる
- `nil?`、`blank?`、`present?`、`empty?`の違い
  - `nil?`はオブジェクトが nil の場合に true を返し、そうでないときに false を返す
  - `blank?`はオブジェクトが空の場合に true を返し、そうでない時に false を返す
- `blank?`の空の条件
  - nil
  - 空文字
  - 空の配列
  - 空のハッシュ
  - 空の文字列とスペースを含む文字列
- `present?`はオブジェクトが存在し、空でない場合に true を返し、そうでない場合に false を返す（`blank?`の反対）
- `empty?`はオブジェクトが空であれば true を返すが、nil には使えない

## わからなかったこと

- `has_secure_password`と`presence: true`のエラーメッセージの重複をなくす方法
- docker のコンテナではテストが成功するのに CI でテストが失敗する原因

## 次やること

- Github Actions 公式ドキュメント
- udemy クリーンコード
  - 2
  - 3
  - 4
  - 5
  - 6
  - 7
  - 8

## 感想

とりあえず空文字はパスワード確認用で許可しないようにできるから`has_secure_password`で存在をチェックする。

なんでパスワードでスペースのみを許可してるのかわからない。

CI で rspec が失敗する原因を解決できない。おそらく TailwindCSS を使ってるからアセット関連だと思うけど。
Rails の CSS、JavaScript 関連がややこしすぎる。
