# 7/22 (月)

## 取り組んだこと
- ポートフォリオ 英語日記
  - ユーザー新規登録機能

## 学んだこと
- `has_secure_password`を使うと空文字は許可されてしまう
- `bcrypt`はデフォルトでパスワードの最大文字数が72文字に設定されている
- `allow_nil: true`で属性がnilのときにバリデーションをスキップできる
- `nil?`、`blank?`、`present?`、`empty?`の違い
  - `nil?`はオブジェクトがnilの場合にtrueを返し、そうでないときにfalseを返す
  - `blank?`はオブジェクトが空の場合にtrueを返し、そうでない時にfalseを返す
- `blank?`の空の条件
  - nil
  - 空文字
  - 空の配列
  - 空のハッシュ
  - 空の文字列とスペースを含む文字列
- `present?`はオブジェクトが存在し、空でない場合にtrueを返し、そうでない場合にfalseを返す（`blank?`の反対）
- `empty?`はオブジェクトが空であればtrueを返すが、nilには使えない

## わからなかったこと
- `has_secure_password`と`presence: true`のエラーメッセージの重複をなくす方法
- dockerのコンテナではテストが成功するのにCIでテストが失敗する原因

## 次やること
- Github Actions公式ドキュメント
- udemy クリーンコード
  - 2
  - 3
  - 4
  - 5
  - 6
  - 7
  - 8

## 感想
とりあえず空文字はパスワード確認用で許可しないようにできるから`has_secure_password`で存在をチェックする。

なんでパスワードでスペースのみを許可してるのかわからない。

CIでrspecが失敗する原因を解決できない。おそらくTailwindCSSを使ってるからアセット関連だと思うけど。
RailsのCSS、JavaScript関連がややこしすぎる。