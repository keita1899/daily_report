# 7/30

## 取り組んだこと
- ポートフォリオ 英語日記
  - プロフィール
- udemy クリーンコード
  - 8
  - 9
- ブログ Rails アプリインストール・設定
- ブログ Rails ルーティング
- ブログ Rails コントローラ
- ブログ Rails N+1

## 学んだこと
### Rails
- `validates`に`on:`を指定すると、バリデーションを実行したいアクションを指定できる
- `mini_magick`のgemを使うと画像のリサイズができる
- `variant`メソッドで画像の表示サイズを指定できる
- `preload`は1対多の時に使う
- `eager_load`は1対1や、絞り込みを行う時に使う
- Strong parametersは`require`でモデルを指定し、`permit`で値を許可する
- アクションとビューの名前が一致している場合、`render`を記述しなくても実行される
- `ApplicationController`にはアプリ全体で使うコードを書く
- `ActionController::Base`はコントローラの基本機能を提供している

### udemy クリーンコード
- 8章 クラス
  - クラスの情報はプライベートやセッターゲッターでなるべく隠蔽する
  - クラス内部について知らなくても使えるようにする
  - 継承とコンポジションの違いを知る
  - 凝集度と結合度を意識する
  - 1つのクラスに1つの責務
  - 大体100行ぐらいまでで1つのクラスを作る
  - クラスはデータを保持するものか機能を持つものを作ることが多い
  - 基本的にプロパティはプライベートで定義して、外部で使うプロパティは後から変更する
  - コンポジションはあるクラスの機能を継承を使わずにプロパティとして持つクラスのこと（継承のis aの関係と違ってhas aの関係）
  - コンポジションは柔軟性が高いが、クラス内のプロパティやメソッドが多くなる可能性がある
  - 凝集度はモジュール内におけるデータ（プロパティ）とロジック（メソッド）の関係性の強さを表す指標
  - プロパティがクラス内で閉じていて、まとまっている高凝集であれば良いクラス
  - 結合度はモジュール間の依存度合いを表す指標で、疎結合であれば再利用性が高く見通しの良いコード
  - クラスを修正した時に他のクラスも修正が必要な場合は密結合
  - クラスの内部構造を使って外部から計算させる処理は書かない
  - プロパティはなるべくプライベートにしてセッターゲッターで操作するようにすることで疎結合になる
- 9章 SOLID
  - SOLIDはオブジェクト指向における設計原則のことで、以下の原則の頭文字をとったもの
    - 単一責任原則 Single Responsibility Principle
    - オープンクローズドの原則 Open-Closed Principle
    - リスコフの置換原則 Liskov Substitution Principle
    - インタフェース分離の原則 Interface Segregation Principle
    - 依存性逆転の原則 Dependency Inversion Principle
  - 単一責任原則はクラスには単一の責任のみを負うべきであるというルール
  - クラスの責任が多いと、他のコードに影響を与える可能性がある
  - オープンクローズドの原則はクラスの拡張にはオープンで、修正にはクローズドであるべき（既存の機能に変更を加えずに拡張できるようにすべき）という原則
  - リスコフの置換原則は派生クラス（継承先クラス）は基底クラス（継承元）と同じ振る舞い（戻り値や副作用が同じ）をするべきであるという原則、つまり子クラスは親クラスと同じ目的で実装すべき
  - インターフェース分離の原則はインターフェースの利用者に必要なものだけを提供すべきであるという原則
  - 依存関係逆転の原則は抽象クラスは具象クラスに依存させずに、具象クラスが抽象クラスに依存するように実装するべきという原則

## わからなかったこと
- 画像の拡張子のバリデーションが正しいはずなのにエラーになる
- 画像のリサイズができない

## エラー
### Active Storageのモデルスペック実行時に以下のエラー
NameError:
       uninitialized constant Marcel::TYPES

                 Marcel::TYPES.keys
                       ^^^^^^^
       Did you mean?  Marcel::TYPE_EXTS

- `active_storage_validations`を最新にアップデートして解決

## 次やること
- ポートフォリオ 英語日記
  - アカウント有効化
  - パスワードリセット
  - メールアドレス変更
- リーダブルコード
  - 1
  - 2
  - 3
  - 4
  - 5
  - 6
  - 7
- ブログ Rails ビュー
- ブログ Rails モデル

## 感想
SOLID原則難しい。プログラミング関連の説明ってわかりにくすぎる。