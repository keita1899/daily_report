# 9/30

## 取り組んだこと

- Zenn Rails×Next.js×AWS ハンズオン解説
  - Next.js

## 学んだこと

### Zenn Rails×Next.js×AWS ハンズオン解説

#### Next.js

- RailsAPI からのレスポンスで返される JSON はキーがスネークケースになってしまうので、camelcaseKeys をインストールする
- Stack コンポーネントは複数の似た要素を縦または横方向に等間隔で並べることができるコンポーネント
- Menu コンポーネントの`anchorEl`プロパティはモーダルをどの HTML 付近に表示させるかを指定する

- 認証の流れ

  1. サインイン API を叩き、レスポンスから認証情報を取得する
  2. 認証情報をブラウザのローカルストレージに保存する
  3. ローカルストレージの認証情報でユーザーを取得する
  4. 取得したサインインユーザーの認証情報を useSWR のグローバルステートで保存する

- react-form-fook の使い方

  - useForm で入力値に対する型と、フォームのデフォルトの入力値を定義し、`handleSubmit`と`control`を取得する

- 通知バーの実装

  1. 通知バーの状態（メッセージ、カラーデザイン、表示するパス）をグローバルステートに定義する
  2. Snackbar コンポーネントを作成
  3. `_app.tsx`で Snackbar コンポーネントを読み込み、どの画面でも表示できるようにする
  4. 任意の処理で`setSnackbar`を使い、グローバルステートを更新して通知バーを表示させる

- 記事編集の処理の流れ
  1. サインイン確認
  2. ルーターとグローバルステートの初期化
  3. SWR で記事データ取得
  4. useMemo で記事データの初期化
  5. フォームの初期化
  6. フォーム送信
  7. axios で API 送信
  8. 画面の表示

## わからなかったこと

- `const omit = (text: string) => (len: number) => (ellipsis: string) => text.length >= len ? text.slice(0, len - ellipsis.length) + ellipsis : text`の書き方
- next.js でのクエリパラメータの取得
- データフェッチに関連する挙動
- useSWR でグローバルステートを使う方法

## エラー

## 次やること

- ネットワークはなぜつながるのか

## 感想

useEffect の依存配列が複数になった時にわかりづらい。

react-form-hook 別の機会で使って詳しく学ぶ。

自分なりにコンポーネント分割してみたけど、型の共通化が難しい。慣れだな。
