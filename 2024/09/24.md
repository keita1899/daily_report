# 9/24

## 取り組んだこと

- Linux サーバー構築標準教科書

## 学んだこと

### Linux サーバー構築標準教科書

- 1 章 Linux サーバーの概要
  - Linux の中心部であるカーネルにソフトウェアやインストーラを追加して利用できるようにしたものが Linux ディストリビューション
  - ホスト名+ドメイン名と IP アドレスの変換を名前解決といい、名前解決を行うのが DNS サーバーで、ホストが DNS サーバーアドレスに対して名前解決を依頼する
  - DVD は OS のインストールディスクとしても使われる
  - 仮想マシンは ISO イメージを仮想光学ドライブにセットすることでインストールが行える
  - ISO イメージは`OS-バージョン-アーキテクチャ-イメージの種類.iso`といったファイル名になっている
  - Linux カーネルは様々な種類の CPU アーキテクチャに対応しており、アーキテクチャによってバイナリが異なるため、アーキテクチャに合わせた ISO イメージを選択する必要がある
  - アーキテクチャの種類
    - x86_64 - Inter や AMD の CPU アーキテクチャ
    - aarch64 - ARM のアーキテクチャ
  - ISO イメージの種類
    - boot.iso - インストーラの起動のみを行う
    - minimal.iso - 最低限の OS インストールを行う
    - dvd.iso - フルインストールが可能
  - 実務では最小限の ISO イメージをインストールし、必要なパッケージを追加してサーバーを構築することが多い
  - 仮想マシン間の接続は仮想ネットワークを経由して行う
  - サーバーを構築する上で行うネットワークの設定項目
    - ドメイン名 - DNS サーバーを設定する時に必要
    - ホスト名
    - IP アドレス
    - サブネットマスク - IP アドレスのネットワーク部とホスト部を分ける値
    - デフォルトゲートウェイ - 異なるサブネットとの通信に必要
    - DNS サーバーアドレス
- 2 章 VirtualBox のインストールと仮想マシンの作成
  - 仮想化技術とはハードウェアの機能をソフトウェアで実現する技術
  - 仮想ホストは仮想マシンを実行するマシンのことで、ゲスト OS が仮想マシンにインストールする OS
  - 仮想マシンはホスト OS 上でアプリのように実行されるホスト OS 型と、仮想マシン実行専用のソフトウェアであるハイパーバイザーが動作するハイパーバイザー型に分けられる
  - 仮想マシンのリソース
    - CPU
    - メモリ - ホストマシンから仮想マシンに割り当てられる
    - ディスク - HDD や SSD にあたる仮想ディスクはホスト OS 上で仮想ディスクファイルという形で作られる
    - 光学ドライブ
    - ネットワーク
  - VirtualBox マネージャーで行えること
    - VirtualBox 自身の各種設定
    - 仮想マシンの管理
    - ISO イメージ等の管理
    - 仮想ネットワークの管理
  - プロセッサ = CPU
- 3 章 Linux のインストールと設定

  - ISO イメージは ISO9660 形式で保存した DIC を 1 つのファイルに保存したもの
  - ブートローダーは OS の起動時に最初に読み込まれるプログラムで、ブートローダーが Linux カーネルを読み込んでシステムが起動する
  - Linux はディスクを複数の区画であるパーティションに分割して利用する
  - NAT は Network Address Translation の略で、IP 通信時に IP アドレスを変換して通信を行う仕組み
  - NAT によって 1 つのグローバル IP アドレスを複数のホストで共有して利用できる

- CPU のアーキテクチャとは
  - コンピュータのハードウェアとソフトウェアが相互にやり取りするための設計や構造のことで、CPU が実行できる命令やデータの処理方法、メモリ管理、周辺機器との接続方式などを定義する
  - アーキテクチャによって、CPU ごとに理解できる命令のセットや、ビット、消費電力などが異なる
- ISO イメージとは
  - CD や DVD、ブルーレイディスクなどの光学ディスクの内容をそのままファイルにしたもの
  - 主に OS のインストールメディアとして使われる
  - 仮想ドライブにマウントすることで物理ディスクのように扱える

### ネットワークはなぜつながるのか

- URL をブラウザに入力してから画面に Web のページが表示されるまでの流れをまとめたもの
- ブラウザに要求してサーバーが要求に従って結果を返す
- 通信相手を正確に識別して、リクエストやレスポンスを相手側まで運ぶ仕組みが必要
- リクエストやレスポンスはみな 0 と 1 から成るデジタルデータなので、ネットワークはデジタルデータを目的地まで運ぶ仕組み
- ネットワークは OS に組み込まれたネットワーク制御用ソフトウェアや、スイッチ、ルーターといった機器が役割分担しながら実現する
- デジタルデータは小さく分割したパケットで運ぶ
- デジタルデータを運ぶ仕組みと、ブラウザや Web サーバーといったアプリでネットワークは成り立つ

- 流れまとめ

  1. URL をブラウザに入力すると、ブラウザは決められたルールに従って URL の意味を調べ、その意味に従ってリクエストメッセージを作る
  2. リクエストメッセージは OS に組み込まれたネットワーク制御用ソフトウェア（プロトコルスタック）に依頼してサーバーに届けてもらう
  3. プロトコル・スタックはブラウザから受け取ったメッセージをパケットに格納して宛先アドレスなどの情報を付加する
  4. 次にパケットを LAN アダプタに渡し、LAN アダプタが電気信号に変換して LAN のケーブルに送り出すことで、パケットがネットワークの中に入る
  5. LAN アダプタが送信したパケットはスイッチング・ハブなどを経由してインターネット接続用ルーターに届く
  6. ルーターの先はインターネットであり、プロバイダがパケットを相手まで運ぶ
  7. インターネットの入り口にはアクセス回線があり、アクセス回線は契約しているプロバイダにつながっていて、そこに POP というプロバイダ向けに作られたルーターがある
  8. POP の先がインターネットの中核部分につながる
  9. Web サーバー側の LAN にたどり着くとファイアウォールが待ち構えていて、パケットをチェックする
  10. チェックが終わればキャッシュサーバーや負荷分散装置を通る
  11. パケットが Web サーバー・マシンにたどり着いたら、パケットの中身から元のリクエストメッセージを復元し、Web サーバー・アプリに渡す
  12. Web サーバー・アプリがリクエストからレスポンスを作り、ここまでの流れと逆の動きでクライアントに送信する
  13. クライアントにレスポンスが届いたら、そこからページのデータを取り出して画面に表示する

- 1 章 Web ブラウザがメッセージを作る
  - ブラウザが URL を解読する → Web サーバーへのリクエストを作る → OS に依頼して Web サーバーにリクエストを送信してもらう → Web サーバーの IP アドレスが必要 → Web サーバーのドメイン名から DNS サーバーに問い合わせて IP アドレスを調べる → OS に依頼する
  - ブラウザはいくつかの機能があるため、`http:`なら Web サーバー、`ftp:`なら FTP サーバーといったプロトコルが用意されている
  - URL を解読するときは分解する
  - URL のファイル名を省略したときはどのファイルにアクセスすればいいかわからないため、あらかじめファイル名をサーバー側に設定しておく
  - リクエストでは何をどうして欲しいのかが書かれており、何をが URI、どうしてがメソッドにあたる
  - メソッドは Web サーバーにどのような動作をして欲しいのか伝える
  - Web サーバーにデータを送る場合は、ヘッダーフィールドに入る
  - POST メソッドの場合は URI はプログラムのファイル名を書く
  - メソッドはURL欄の入力や、フォームの入力、リンクなどブラウザの動作状態で判断する
  - 
- 2 章 TCP/IP のデータを電気信号にして送る
- 3 章 ケーブルの先は LAN 機器だった
- 4 章 アクセス回線を通ってインターネットの内部へ
- 5 章 サーバー側の LAN には何がある
- 6 章 Web サーバーに到着し、応答データが Web ブラウザに戻る

## わからなかったこと

- M1 Mac で VirtualBox を使うやり方

## エラー

-

## 次やること

-

## 感想

Linux サーバー構築標準教科書 M1 Mac だと難しい。
VirtualBox のバージョンとかも違うし。

適当に調べて Linux でサーバー構築できるようにする。
仮想マシンって設定するものが多いし、それが必須なのかも、どういう手順で設定すべきかもわからんからマジでむずい。
